<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <title>å¾®æ°”å€™ - A microclimate can be something so small</title>
    <meta name="description" content="3åˆ†é’Ÿç‹¬å¤„æ¢å¤ä½“éªŒï¼Œç»™èŒåœºäººä¸€ä¸ªå®‰é™çš„æ¢å¤ç©ºé—´">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- é¦–é¡µ - çŠ¶æ€é€‰æ‹© -->
    <div id="home-page" class="page active">
        <div class="container">
            <main class="main-content">
                <div class="artistic-header">
                    <h1 class="cosmic-title">å¾®æ°”å€™</h1>
                    <p class="cosmic-subtitle">ç»™è‡ªå·±3åˆ†é’Ÿæ—¶é—´ï¼Œåˆ›é€ ä¸€ä¸ªå®‰é™çš„æ¢å¤ç©ºé—´</p>
                </div>
                
                <div class="state-selection">
                    <h2 class="cosmic-question">ä½ ç°åœ¨æ„Ÿè§‰æ€ä¹ˆæ ·ï¼Ÿ</h2>
                    <div class="state-options">
                        <button class="state-option" data-state="great">
                            <span class="emoji">ğŸ˜Š</span>
                            <span class="label">å¾ˆå¥½</span>
                        </button>
                        <button class="state-option" data-state="okay">
                            <span class="emoji">ğŸ˜</span>
                            <span class="label">è¿˜è¡Œ</span>
                        </button>
                        <button class="state-option" data-state="tired">
                            <span class="emoji">ğŸ˜”</span>
                            <span class="label">æœ‰ç‚¹ç´¯</span>
                        </button>
                        <button class="state-option" data-state="very-tired">
                            <span class="emoji">ğŸ˜©</span>
                            <span class="label">å¾ˆç´¯</span>
                        </button>
                        <button class="state-option" data-state="exhausted">
                            <span class="emoji">ğŸ¤¯</span>
                            <span class="label">å´©æºƒ</span>
                        </button>
                    </div>
                </div>
                
                <div class="action-section">
                    <button id="start-btn" class="primary-btn" disabled>
                        å¼€å§‹3åˆ†é’Ÿå‘¼å¸RESET
                    </button>
                </div>
            </main>
        </div>
    </div>

    <!-- æ¢å¤ä½“éªŒé¡µ -->
    <div id="experience-page" class="page">
        <div class="container">
            <button id="back-btn" class="cosmic-back-btn">â†</button>
            
            <main class="main-content">
                <div class="cosmic-experience-title">
                    <h1 class="experience-title">å‘¼å¸RESET</h1>
                </div>
                
                <div class="cosmic-timer-section">
                    <div class="timer-display">
                        <span id="timer">03:00</span>
                    </div>
                    <div class="breathing-container">
                        <div class="breathing-circle" id="breathing-circle">
                            <div class="breathing-text" id="breathing-text">æ·±å‘¼å¸...</div>
                        </div>
                        <div class="breathing-guide" id="breathing-guide">
                            ç¬¬ä¸€æ­¥ï¼šè½»æ¾åç€ï¼ŒåŒè„šå¹³æ”¾åœ°é¢ï¼Œæ‰‹è½»è½»æ”¾åœ¨è‚šå­ä¸Š
                        </div>
                    </div>
                </div>
                
                <div class="audio-section">
                    <div class="audio-controls">
                        <button class="audio-btn" data-audio="birds">
                            <span class="audio-icon">ğŸ¦</span>
                            <span class="audio-label">é¸Ÿå£°</span>
                        </button>
                        <button class="audio-btn" data-audio="rain">
                            <span class="audio-icon">ğŸŒ§ï¸</span>
                            <span class="audio-label">é›¨å£°</span>
                        </button>
                        <button class="audio-btn" data-audio="heartbeat">
                            <span class="audio-icon">ğŸ’“</span>
                            <span class="audio-label">å¿ƒè·³å£°</span>
                        </button>
                        <button class="audio-btn" data-audio="waves">
                            <span class="audio-icon">ğŸŒŠ</span>
                            <span class="audio-label">æµ·æµªå£°</span>
                        </button>
                        <button class="audio-btn" data-audio="none">
                            <span class="audio-icon">ğŸ”‡</span>
                            <span class="audio-label">é™éŸ³</span>
                        </button>
                    </div>
                </div>
                
                <div class="control-section">
                    <button id="pause-btn" class="control-btn">æš‚åœ</button>
                    <button id="restart-btn" class="control-btn">é‡æ–°å¼€å§‹</button>
                    <button id="end-early-btn" class="control-btn end-early">æå‰ç»“æŸ</button>
                </div>
            </main>
        </div>
    </div>

    <!-- å®Œæˆåé¦ˆé¡µ -->
    <div id="feedback-page" class="page">
        <div class="container">
            <main class="main-content">
                <div class="cosmic-completion">
                    <div class="completion-icon">âœ¨</div>
                    <h2 class="completion-title">æ­å–œä½ å®Œæˆäº†3åˆ†é’Ÿå‘¼å¸RESET</h2>
                    <p class="completion-text">å¸Œæœ›è¿™çŸ­æš‚çš„æ—¶å…‰èƒ½ä¸ºä½ å¸¦æ¥ä¸€äº›å®é™</p>
                </div>
                
                <div class="feedback-section">
                    <h3 class="feedback-title">è¿™æ¬¡ä½“éªŒå¯¹ä½ æœ‰å¸®åŠ©å—ï¼Ÿ</h3>
                    <div class="feedback-options">
                        <button class="feedback-btn" data-feedback="helpful">
                            <span class="feedback-icon">ğŸ‘</span>
                            <span class="feedback-label">æœ‰ç”¨</span>
                        </button>
                        <button class="feedback-btn" data-feedback="neutral">
                            <span class="feedback-icon">ğŸ˜</span>
                            <span class="feedback-label">ä¸€èˆ¬</span>
                        </button>
                        <button class="feedback-btn" data-feedback="not-helpful">
                            <span class="feedback-icon">ğŸ‘</span>
                            <span class="feedback-label">æ²¡ç”¨</span>
                        </button>
                    </div>
                    
                    <!-- æ–°å¢çš„å…³é”®é—®é¢˜ -->
                    <div class="key-questions-section">
                        <h4 class="key-questions-title">åé¦ˆæ„è§</h4>
                        
                        <div class="question-item">
                            <label class="question-label">ä½ ä¼šåœ¨ä»€ä¹ˆæƒ…å†µä¸‹æƒ³èµ·ä½¿ç”¨è¿™ä¸ªå·¥å…·ï¼Ÿ</label>
                            <textarea id="usage-scenario-input" class="question-input" placeholder="è¯·æè¿°ä½ ä¼šåœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä½¿ç”¨è¿™ä¸ªå·¥å…·..." maxlength="300"></textarea>
                        </div>
                        
                        <div class="question-item">
                            <label class="question-label">å¦‚æœå·¥ä½œå¾ˆå¿™ï¼Œä½ è¿˜ä¼šä½¿ç”¨å—ï¼Ÿ</label>
                            <div class="question-options">
                                <button class="question-option-btn" data-question="busy-usage" data-answer="yes">
                                    <span class="option-icon">âœ…</span>
                                    <span class="option-label">ä¼šä½¿ç”¨</span>
                                </button>
                                <button class="question-option-btn" data-question="busy-usage" data-answer="maybe">
                                    <span class="option-icon">ğŸ¤”</span>
                                    <span class="option-label">å¯èƒ½ä¼š</span>
                                </button>
                                <button class="question-option-btn" data-question="busy-usage" data-answer="no">
                                    <span class="option-icon">âŒ</span>
                                    <span class="option-label">ä¸ä¼šä½¿ç”¨</span>
                                </button>
                            </div>
                        </div>
                        
                        <div class="question-item">
                            <label class="question-label">è¿™ä¸ªå·¥å…·ç»™ä½ çš„ç¬¬ä¸€å°è±¡æ˜¯ä»€ä¹ˆï¼Ÿ</label>
                            <textarea id="first-impression-input" class="question-input" placeholder="è¯·æè¿°ä½ å¯¹è¿™ä¸ªå·¥å…·çš„ç¬¬ä¸€å°è±¡..." maxlength="300"></textarea>
                        </div>
                    </div>
                    
                    <div class="suggestion-section">
                        <textarea id="suggestion-input" placeholder="æœ‰ä»€ä¹ˆå»ºè®®æˆ–æƒ³æ³•å—ï¼Ÿï¼ˆå¯é€‰ï¼‰" maxlength="200"></textarea>
                    </div>
                    
                    <button id="submit-feedback-btn" class="primary-btn">æäº¤åé¦ˆ</button>
                </div>
                
                <div class="restart-section">
                    <button id="restart-experience-btn" class="secondary-btn">å†æ¥ä¸€æ¬¡</button>
                </div>
            </main>
        </div>
    </div>

    <!-- éŸ³é¢‘å…ƒç´  -->
    <audio id="birds-audio" preload="auto" loop>
        <source src="audio/spring-birds-in-a-summer-loop-195105.mp3" type="audio/mpeg">
    </audio>
    <audio id="rain-audio" preload="auto" loop>
        <source src="audio/heavy-rain-white-noise-159772.mp3" type="audio/mpeg">
    </audio>
    <audio id="heartbeat-audio" preload="auto" loop>
        <source src="audio/heartbeat-241465.mp3" type="audio/mpeg">
    </audio>
    <audio id="waves-audio" preload="auto" loop>
        <source src="audio/ocean-sea-soft-waves-121349.mp3" type="audio/mpeg">
    </audio>

    <script src="script.js"></script>
    
    <!-- Vercel Analytics -->
    <script>
        // åˆå§‹åŒ– Vercel Analytics
        window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
    
    <!-- æ•°æ®çœ‹æ¿ -->
    <div id="adminPanel" style="display:none; position:fixed; top:10px; right:10px; background:white; padding:15px; border:1px solid #ccc; border-radius:5px; z-index:9999; max-width:300px; font-size:12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
        <h4 style="margin:0 0 10px 0; color:var(--text-primary);">æ•°æ®çœ‹æ¿ ğŸ“Š</h4>
        <div id="statsDisplay"></div>
        <div style="margin-top:10px;">
            <button onclick="updateAdminPanel()" style="margin:2px; padding:4px 8px; font-size:11px; background:#f39c12; color:white; border:none; border-radius:3px; cursor:pointer;">åˆ·æ–°</button>
            <button onclick="closeAdmin()" style="margin:2px; padding:4px 8px; font-size:11px; background:#95a5a6; color:white; border:none; border-radius:3px; cursor:pointer;">å…³é—­</button>
        </div>
    </div>

    <script>
        // æŒ‰ Ctrl+Shift+D æ˜¾ç¤ºæ•°æ®çœ‹æ¿
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.shiftKey && e.key === 'D') {
                const panel = document.getElementById('adminPanel');
                panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
                if (panel.style.display === 'block') {
                    updateAdminPanel();
                }
            }
        });

        function updateAdminPanel() {
            try {
                // è·å–äº‹ä»¶æ•°æ®
                const events = JSON.parse(localStorage.getItem('microclimate_events') || '[]');
                
                // è®¡ç®—ç»Ÿè®¡æ•°æ®
                const stats = {
                    pageViews: 0,
                    stateSelected: 0,
                    experienceStarted: 0,
                    experienceCompleted: 0,
                    experienceEndedEarly: 0,
                    feedbackSubmitted: 0
                };
                
                // ç»Ÿè®¡å„ç§äº‹ä»¶
                events.forEach(event => {
                    switch(event.action) {
                        case 'page_view':
                            stats.pageViews++;
                            break;
                        case 'state_selected':
                            stats.stateSelected++;
                            break;
                        case 'experience_started':
                            stats.experienceStarted++;
                            break;
                        case 'experience_completed':
                            stats.experienceCompleted++;
                            break;
                        case 'experience_ended_early':
                            stats.experienceEndedEarly++;
                            break;
                        case 'feedback_submitted':
                            stats.feedbackSubmitted++;
                            break;
                    }
                });
                
                // è®¡ç®—æ—¶é—´åˆ†æ
                const hourlyUse = {};
                let eveningUse = 0;
                let totalUse = 0;
                
                events.forEach(event => {
                    if (event.hour !== undefined) {
                        hourlyUse[event.hour] = (hourlyUse[event.hour] || 0) + 1;
                        totalUse++;
                        if (event.hour >= 21 && event.hour <= 23) {
                            eveningUse++;
                        }
                    }
                });
                
                const eveningRate = totalUse > 0 ? (eveningUse / totalUse * 100).toFixed(1) : 0;
                
                // æ›´æ–°æ˜¾ç¤º
                document.getElementById('statsDisplay').innerHTML = `
                    <div style="margin-bottom:8px;">
                        <strong style="color:var(--text-primary);">æ ¸å¿ƒè½¬åŒ–ç‡ï¼š</strong>
                        <div style="margin-left:10px;">
                            <div>å®Œæˆç‡: ${stats.experienceStarted ? (stats.experienceCompleted/stats.experienceStarted*100).toFixed(1) : 0}%</div>
                            <div>çŠ¶æ€é€‰æ‹©ç‡: ${stats.pageViews ? (stats.stateSelected/stats.pageViews*100).toFixed(1) : 0}%</div>
                        </div>
                    </div>
                    <div style="margin-bottom:8px;">
                        <strong style="color:var(--text-primary);">ä½¿ç”¨æ•°æ®ï¼š</strong>
                        <div style="margin-left:10px;">
                            <div>æ€»è®¿é—®: ${stats.pageViews}</div>
                            <div>å®Œæˆä½“éªŒ: ${stats.experienceCompleted}</div>
                            <div>åé¦ˆæ•°: ${stats.feedbackSubmitted}</div>
                        </div>
                    </div>
                    <div style="margin-bottom:8px;">
                        <strong style="color:var(--text-primary);">æ—¶é—´åˆ†æï¼š</strong>
                        <div style="margin-left:10px;">
                            <div>æ™šé—´ä½¿ç”¨ç‡: ${eveningRate}%</div>
                            <div>æ€»äº‹ä»¶: ${totalUse}</div>
                        </div>
                    </div>
                    <div style="font-size:10px; color:var(--text-secondary); margin-top:8px; border-top:1px solid #ecf0f1; padding-top:5px;">
                        æŒ‰ Ctrl+Shift+D æ‰“å¼€/å…³é—­æ­¤é¢æ¿
                    </div>
                `;
            } catch (error) {
                document.getElementById('statsDisplay').innerHTML = `
                    <div style="color:var(--text-primary);">æ•°æ®åŠ è½½é”™è¯¯</div>
                    <div style="font-size:10px; color:var(--text-secondary);">${error.message}</div>
                `;
            }
        }

        function closeAdmin() {
            document.getElementById('adminPanel').style.display = 'none';
        }
    </script>
</body>
</html>
